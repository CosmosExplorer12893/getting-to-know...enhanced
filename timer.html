<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>5:00 Countdown Timer</title>
  <style>
    :root{
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #7c3aed;
      --muted: #94a3b8;
      --white: #e6eef8;
      --radius: 14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, #071021 0%, #071423 100%);
      color:var(--white);
      display:flex; align-items:center; justify-content:center;
      padding:32px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius);
      padding:28px;
      width:360px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      text-align:center;
      border: 1px solid rgba(255,255,255,0.03);
    }

    h1{margin:0 0 12px; font-size:20px; color:var(--muted); font-weight:600}

    .timer{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:18px;
      margin:14px 0 22px;
    }

    .time-display{
      font-size:52px;
      font-weight:700;
      letter-spacing:2px;
      width:180px;
      text-align:center;
      color:var(--white);
    }

    /* Circular progress ring container */
    .ring-wrap{
      width:96px; height:96px; position:relative;
    }
    svg{display:block}
    .ring-center{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
      font-weight:600; font-size:12px; color:var(--muted);
    }

    .controls{
      display:flex; gap:10px; justify-content:center;
    }
    button{
      background:transparent; color:var(--white); border:1px solid rgba(255,255,255,0.06);
      padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600;
      transition:transform .12s ease, background .12s ease;
    }
    button:hover{transform:translateY(-3px)}
    button.primary{
      background:linear-gradient(180deg,var(--accent), #5b21b6);
      border: none;
      box-shadow: 0 6px 18px rgba(124,58,237,0.18);
    }
    button.ghost{
      background: rgba(255,255,255,0.03);
    }

    .footer{margin-top:14px; font-size:13px; color:var(--muted)}
    @media (max-width:420px){
      .card{width:92vw; padding:20px}
      .time-display{font-size:44px}
    }
  </style>
</head>
<body>
  <div class="card" role="region" aria-label="Five minute countdown timer">
    <h1>Countdown — 5 minutes</h1>

    <div class="timer">
      <div class="ring-wrap" aria-hidden="true">
        <!-- SVG circle for progress (we'll update stroke-dashoffset via JS) -->
        <svg width="96" height="96" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="g" x1="0" x2="1">
              <stop offset="0" stop-color="#8b5cf6"/>
              <stop offset="1" stop-color="#4f46e5"/>
            </linearGradient>
          </defs>
          <!-- Background ring -->
          <circle cx="48" cy="48" r="40" stroke="rgba(255,255,255,0.04)" stroke-width="10" fill="none" />
          <!-- Foreground progress ring -->
          <circle id="progressRing" cx="48" cy="48" r="40" stroke="url(#g)" stroke-width="10" fill="none"
                  stroke-linecap="round" transform="rotate(-90 48 48)" stroke-dasharray="251.2" stroke-dashoffset="0"/>
        </svg>
        <div class="ring-center" id="percentLabel">100%</div>
      </div>

      <div class="time-display" id="timeDisplay" aria-live="polite" aria-atomic="true">05:00</div>
    </div>

    <div class="controls" role="group" aria-label="Timer controls">
      <button id="startBtn" class="primary">Pause</button>
      <button id="resetBtn" class="ghost">Reset</button>
    </div>

    <div class="footer">Auto-starts at 5:00. Play sound when finished.</div>
  </div>

  <script>
    (function(){
      // Configuration
      const START_SECONDS = 5 * 60; // 5 minutes = 300 seconds
      const ring = document.getElementById('progressRing');
      const timeDisplay = document.getElementById('timeDisplay');
      const percentLabel = document.getElementById('percentLabel');
      const startBtn = document.getElementById('startBtn');
      const resetBtn = document.getElementById('resetBtn');

      // ring circumference (r=40 => circ = 2πr)
      const R = 40;
      const CIRC = 2 * Math.PI * R;
      ring.style.strokeDasharray = CIRC.toFixed(2);

      let endTime = null;
      let paused = false;
      let remainingWhenPaused = START_SECONDS * 1000; // milliseconds
      let tickId = null;

      // WebAudio beep for time's up
      function beep() {
        try {
          const ctx = new (window.AudioContext || window.webkitAudioContext)();
          const o = ctx.createOscillator();
          const g = ctx.createGain();
          o.type = 'sine';
          o.frequency.setValueAtTime(880, ctx.currentTime);
          g.gain.setValueAtTime(0.0001, ctx.currentTime);
          g.gain.exponentialRampToValueAtTime(0.2, ctx.currentTime + 0.02);
          g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 1.1);
          o.connect(g); g.connect(ctx.destination);
          o.start();
          o.stop(ctx.currentTime + 1.15);
        } catch (e) {
          // ignore if AudioContext not allowed
        }
      }

      function formatMs(ms){ // returns "MM:SS"
        if (ms < 0) ms = 0;
        const totalSec = Math.floor(ms / 1000);
        const minutes = Math.floor(totalSec / 60);
        const seconds = totalSec % 60;
        return String(minutes).padStart(2,'0') + ':' + String(seconds).padStart(2,'0');
      }

      function updateUI(remainingMs){
        // Text
        if (remainingMs <= 0) {
          timeDisplay.textContent = "00:00";
          percentLabel.textContent = "0%";
        } else {
          timeDisplay.textContent = formatMs(remainingMs);
          const percent = Math.ceil((remainingMs / (START_SECONDS*1000)) * 100);
          percentLabel.textContent = percent + '%';
        }

        // Ring offset
        const fraction = Math.max(0, Math.min(1, remainingMs / (START_SECONDS*1000)));
        const dashoffset = CIRC * (1 - fraction);
        ring.style.strokeDashoffset = dashoffset.toFixed(2);
      }

      function startTimer(){
        if (!endTime) {
          // starting fresh
          endTime = Date.now() + remainingWhenPaused;
        } else if (paused) {
          // resuming from pause (remainingWhenPaused already set)
          endTime = Date.now() + remainingWhenPaused;
        }
        paused = false;
        startBtn.textContent = 'Pause';
        if (tickId) cancelAnimationFrame(tickId);
        tick(); // use rAF for smooth updates
      }

      function pauseTimer(){
        paused = true;
        remainingWhenPaused = Math.max(0, endTime - Date.now());
        endTime = null;
        startBtn.textContent = 'Start';
        if (tickId) cancelAnimationFrame(tickId);
      }

      function resetTimer(){
        if (tickId) cancelAnimationFrame(tickId);
        paused = false;
        endTime = null;
        remainingWhenPaused = START_SECONDS * 1000;
        updateUI(remainingWhenPaused);
        startBtn.textContent = 'Pause';
        // auto-start again
        startTimer();
      }

      function tick(){
        const now = Date.now();
        const remainingMs = endTime ? Math.max(0, endTime - now) : remainingWhenPaused;
        updateUI(remainingMs);

        if (remainingMs <= 0) {
          // finished
          if (tickId) cancelAnimationFrame(tickId);
          endTime = null;
          remainingWhenPaused = 0;
          startBtn.textContent = 'Start';
          beep();
          timeDisplay.textContent = "Time's up!";
          percentLabel.textContent = "0%";
          return;
        }

        // schedule next frame
        tickId = requestAnimationFrame(tick);
      }

      // Event handlers
      startBtn.addEventListener('click', ()=>{
        if (paused || !endTime) startTimer();
        else pauseTimer();
      });

      resetBtn.addEventListener('click', resetTimer);

      // Initialize UI and auto-start
      updateUI(START_SECONDS * 1000);
      // Slight delay before auto-start so user sees initial 05:00
      setTimeout(()=> {
        remainingWhenPaused = START_SECONDS * 1000;
        startTimer();
      }, 250);

      // Accessibility: space/enter on focused button should work already. Provide keyboard shortcut: space toggles start/pause.
      window.addEventListener('keydown', (e)=>{
        if (e.code === 'Space') {
          e.preventDefault();
          if (paused || !endTime) startTimer(); else pauseTimer();
        }
        if (e.key.toLowerCase() === 'r') {
          resetTimer();
        }
      });
    })();
  </script>
</body>
</html>
